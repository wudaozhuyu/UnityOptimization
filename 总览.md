# 优化
* [cpu]
* [gpu]
* [显存]
* [带宽]

# 优先级
* cpu利用率
* 带宽利用率
* cpu/gpu强制同步
* 像素着色器指令
* 几何图形cpu到gpu的传输
* 纹理cpu到gpu的传输
* 顶点着色器指令
* 几何图形的复杂度

## 音频
* 在移动平台，音乐音效统一forceToMono(双声道改成单声道), 采样率22050Hz
* Compression Format：尽可能使用未压缩的wav文件，大多使用vorbis压缩比，音乐不打算循环可以用mp3压缩（ios对于mp3有额外优化），简短常用的音效使用adpcm格式（压缩比不是最好，但解码速度快,pcm为未压缩）
* Load Type
    * 压缩后小于200kb Decompress On Load
    * 压缩后大于200kb 长度超过5秒 Compressed In Memory
    * 背景音乐文件比较长 Streaming (会提升cpu的使用率，省内存)
* 静音的时候，销毁Audio Source组件

## 性能优化
* 常见的等待函数
    1. WaitForTargetFPS 等待达到目标帧率，一般这种情况cpu与gpu都没有什么负载问题，一般是垂直同步导致的
    2. Gfx.WaitForGfxCommandsFromMainThread/WaitForCommand 渲染线程已经准备接收新的渲染命令，一般瓶颈在cpu
    3. Gfx.WaitForPresentOnGfxThread/WaitForPresent 主线程在等待渲染线程绘制完成，一般瓶颈在gpu
    4. WaitForJobTGroupID 等待工作线程完成，一般瓶颈在cpu
* 经验
    1. 尽量将gpu耗时控制在10ms内
* SSAO
    1. Downsample 生成中间纹理的分辨率，从而降低采样率，默认是降低1/2
    2. After Opaque 默认开启
    3. Intensity 只影响混合系数，不会对性能造成影响
    4. Radius 是AO系数的采样半径，值越大gpu开销越大
    5. Direct Lighting Strength 不会影响性能
    6. Sample Count 保证最小采样

    > Downsample开启后生成的纹理都是双线程的本身就带有模糊效果，可以考虑取消水平/垂直的模糊代码，或者用一遍模糊算法来实现

    > 使用HBAO or GTAO方案替换SSAO

    > 针对SSAO的shader指令做进一步优化

    > 采用烘焙AO到光照贴图的方案替换SSAO方案
* AA
    1. 第一代 
        * SSAA super-sampling anti-aliasing 超级采样抗锯齿
    2. 第二代 
        * MSAA multi sampling anti-aliasing 
        * FXAA fast approximat anti-aliasing
        * SMAA enhancde subpixel morphological anti-aliasing
    3. 第三代
        * TAA temporal anti-aliasing
    4. 第四代
        * DLSS deep learning super sampling
    


